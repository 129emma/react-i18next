!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],n):n((e=e||self).ReactI18next={},e.React)}(this,function(e,n){"use strict";var t="default"in n?n.default:n;function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.forEach(function(n){r(e,n,t[n])})}return e}function o(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},s=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,l=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,u=Object.create?Object.create(null):{};function f(e,n,t,r,i){var o=n.indexOf("<",r),a=n.slice(r,-1===o?void 0:o);/^\s*$/.test(a)&&(a=" "),(!i&&o>-1&&t+e.length>=0||" "!==a)&&e.push({type:"text",content:a})}function p(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(e){var n=[];for(var t in e)n.push(t+'="'+e[t]+'"');return n.length?" "+n.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(p,"")+"</"+n.name+">"}}var d={parse:function(e,n){n||(n={}),n.components||(n.components=u);var t,r=[],i=-1,o=[],a={},p=!1;return e.replace(l,function(l,u){if(p){if(l!=="</"+t.name+">")return;p=!1}var d,g="/"!==l.charAt(1),h=0===l.indexOf("\x3c!--"),y=u+l.length,b=e.charAt(y);g&&!h&&(i++,"tag"===(t=function(e){var n,t=0,r=!0,i={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return e.replace(s,function(o){if("="===o)return r=!0,void t++;r?0===t?((c[o]||"/"===e.charAt(e.length-2))&&(i.voidElement=!0),i.name=o):(i.attrs[n]=o.replace(/^['"]|['"]$/g,""),n=void 0):(n&&(i.attrs[n]=n),n=o),t++,r=!1}),i}(l)).type&&n.components[t.name]&&(t.type="component",p=!0),t.voidElement||p||!b||"<"===b||f(t.children,e,i,y,n.ignoreWhitespace),a[t.tagName]=t,0===i&&r.push(t),(d=o[i-1])&&d.children.push(t),o[i]=t),(h||!g||t.voidElement)&&(h||i--,!p&&"<"!==b&&b&&f(d=-1===i?r:o[i].children,e,i,y,n.ignoreWhitespace))}),!r.length&&e.length&&f(r,e,0,0,n.ignoreWhitespace),r},stringify:function(e){return e.reduce(function(e,n){return e+p("",n)},"")}};let g,h={bindI18n:"languageChanged",transEmptyNodeValue:""};function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h=i({},h,e)}function b(){return h}const m={};function v(e){g=e}function O(){return g}const j={type:"3rdParty",init(e){y(e.options.react),v(e)}};function w(e){return async n=>{return i({},e.getInitialProps?await e.getInitialProps(n):{},E())}}function E(){const e=O(),n=Object.keys(m),t={},r={};return e.languages.forEach(t=>{r[t]={},n.forEach(n=>{r[t][n]=e.getResourceBundle(t,n)||{}})}),t.initialI18nStore=r,t.initialLanguage=e.language,t}function $(){if(console&&console.warn){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];"string"==typeof n[0]&&(n[0]=`react-i18next:: ${n[0]}`),console.warn.apply(null,n)}}const x={};function I(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];"string"==typeof n[0]&&x[n[0]]||("string"==typeof n[0]&&(x[n[0]]=new Date),$(...n))}function S(e){return e&&(e.children||e.props&&e.props.children)}function k(e){return e&&e.children?e.children:e.props&&e.props.children}function P(e,n,r){if(""===n)return[];if(!e)return[n];const o={};!function e(n){"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),n.forEach(n=>{"string"!=typeof n&&(S(n)?e(k(n)):"object"!=typeof n||t.isValidElement(n)||Object.assign(o,n))})}(e),n=r.services.interpolator.interpolate(n,o,r.language);const a=function e(n,r){return"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),"[object Array]"!==Object.prototype.toString.call(r)&&(r=[r]),r.reduce((r,o,a)=>{if("tag"===o.type){const c=n[parseInt(o.name,10)]||{},s=t.isValidElement(c);if("string"==typeof c)r.push(c);else if(S(c)){const n=e(k(c),o.children);c.dummy&&(c.children=n),r.push(t.cloneElement(c,i({},c.props,{key:a}),n))}else if("object"!=typeof c||s)r.push(c);else{const e=o.children[0]?o.children[0].content:null;e&&r.push(e)}}else"text"===o.type&&r.push(o.content);return r},[])}([{dummy:!0,children:e}],d.parse(`<0>${n}</0>`));return k(a[0])}function A(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).i18n||O();if(!t)return I("You will need pass in an i18next instance by using i18nextReactModule"),[e=>e,{}];const r=b();let i=e||t.options&&t.options.defaultNS;!function(e){e.forEach(e=>{m[e]||(m[e]=!0)})}(i="string"==typeof i?[i]:i||["translation"]);const o=t.isInitialized&&i.every(e=>{return t.hasResourceBundle(t.languages[0],e)||!t.services.backendConnector.backend&&t.hasResourceBundle(t.languages[t.languages.length-1],e)||t.services.backendConnector.backend&&t.services.backendConnector.state[`${t.languages[0]}|${e}`]&&1!==t.services.backendConnector.state[`${t.languages[0]}|${e}`]&&(t.options&&!t.options.fallbackLng||t.hasResourceBundle(t.languages[t.languages.length-1],e))}),c=a(n.useState({t:t.getFixedT(null,i[0])}),2),s=c[0],l=c[1];function u(){l({t:t.getFixedT(null,i[0])})}if(n.useEffect(()=>(r.bindI18n&&t&&t.on(r.bindI18n,u),()=>{if(r.bindI18n){r.bindI18n.split(" ").forEach(e=>t.off(e,u))}})),o)return[s.t,t];throw new Promise(e=>{!function(e,n,t){e.loadNamespaces(n,()=>{if(e.isInitialized)t();else{const n=()=>{setImmediate(()=>{e.off("initialized",n)}),t()};e.on("initialized",n)}})}(t,i,()=>{u(),e()})})}function R(e,n){const t=O();e&&!t.initializedStoreOnce&&(t.services.resourceStore.data=e,t.initializedStoreOnce=!0),n&&!t.initializedLanguageOnce&&(t.changeLanguage(n),t.initializedLanguageOnce=!0)}e.Trans=function(e){let n=e.children,r=e.count,a=e.parent,c=e.i18nKey,s=e.tOptions,l=e.values,u=e.defaults,f=e.components,p=e.ns,d=e.i18n,g=e.t,h=o(e,["children","count","parent","i18nKey","tOptions","values","defaults","components","ns","i18n","t"]);const y=d||O();if(!y)return I("You will need pass in an i18next instance by using i18nextReactModule"),n;const b=g||y.t.bind(y),m=y.options&&y.options.react||{},v=void 0!==a?a:m.defaultTransParent,j=u||function e(n,r,o){return r?("[object Array]"!==Object.prototype.toString.call(r)&&(r=[r]),r.forEach((r,o)=>{const a=`${o}`;if("string"==typeof r)n=`${n}${r}`;else if(S(r))n=`${n}<${a}>${e("",k(r),o+1)}</${a}>`;else if(t.isValidElement(r))n=`${n}<${a}></${a}>`;else if("object"==typeof r){const e=i({},r),t=e.format;delete e.format;const o=Object.keys(e);t&&1===o.length?n=`${n}{{${o[0]}, ${t}}}`:1===o.length?n=`${n}{{${o[0]}}}`:$("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",r)}else $("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",r)}),n):""}("",n)||m.transEmptyNodeValue,w=m.hashTransKey,E=c||(w?w(j):j),x=E?b(E,i({},s,l,l?{}:{interpolation:{prefix:"#$?",suffix:"?$#"}},{defaultValue:j,count:r,ns:p})):j;return v?t.createElement(v,h,P(f||n,x,y)):P(f||n,x,y)},e.useTranslation=A,e.withTranslation=function(e){return function(n){return function(r){const o=a(A(e,r),2),c=o[0],s=o[1];return t.createElement(n,i({},r,{t:c,i18n:s}))}}},e.withSSR=function(){return function(e){function n(n){let r=n.initialI18nStore,a=n.initialLanguage,c=o(n,["initialI18nStore","initialLanguage"]);return R(r,a),t.createElement(e,i({},c))}return n.getInitialProps=w(e),n}},e.useSSR=R,e.initReactI18next=j,e.setDefaults=y,e.getDefaults=b,e.setI18n=v,e.getI18n=O,e.composeInitialProps=w,e.getInitialProps=E,Object.defineProperty(e,"__esModule",{value:!0})});
